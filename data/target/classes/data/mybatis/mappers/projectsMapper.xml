<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data.mapper.IProjectsMapper">

	<resultMap id="ProjectsMap" type="Project">
		<id column="id" property="id" />
		<result column="name" property="name" />
		<result column="description" property="description" />
		<result column="start_date" property="start_date" />
		<result column="end_date" property="end_date" />
		<association property="company" javaType="Company">
			<id column="id" property="id" />
			<result column="code" property="code"/>
			<result column="name" property="name"/>
			<result column="adresse" property="adress"/>
			<association property="ville" javaType="Ville">
				<id column="id" property="id" />
				<result column="name" property="name"/>
			</association>
		</association>		
	</resultMap>
	
	

	<select id="getListProjects" parameterType="map" resultMap="ProjectsMap">
		select *
		from project as proj , company as comp , villes as v
		where proj.company_id = comp.id and comp.ville_id = v.id
	</select>
	
	
</mapper>